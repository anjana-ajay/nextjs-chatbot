(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3991:function(e,t,s){Promise.resolve().then(s.bind(s,7340))},4167:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),n=s(9628),o=s(8461),a=s.n(o),i=s(9089),c=s(4154),l=s(2265);function d(e){let{messages:t}=e;(0,l.useEffect)(()=>{{let e=document.getElementById("box");e&&(e.scrollTop=e.scrollHeight)}},[t]);let s=e=>"string"!=typeof e?(0,r.jsx)("span",{children:"Invalid input"},"invalid"):(0,r.jsx)("div",{children:e.split("\n").map((e,t)=>(0,r.jsxs)("span",{children:[o(e),(0,r.jsx)("br",{})]},t))}),o=e=>{let t=/\((https?:\/\/[^\s]+)\)/g;return e.split(/\*\*(.*?)\*\*/g).flatMap((e,s)=>e.split(t).flatMap((e,t)=>t%2==1?(0,r.jsxs)("span",{children:["(",(0,r.jsx)("a",{style:{color:"blue",textDecoration:"underline"},href:e,target:"_blank",rel:"noopener noreferrer",children:e}),")"]},"".concat(s,"-").concat(t)):s%2==1?(0,r.jsx)("strong",{children:e},t):e))};return(0,r.jsx)("div",{className:"h-96 overflow-auto bg-gray-50 shadow-md p-2 m-2",id:"box",children:(0,r.jsx)("div",{className:"flex flex-col items-center w-full px-4",children:(null==t?void 0:t.length)>0?(0,r.jsx)("div",{className:"w-full flex flex-col space-y-2",children:t.map((e,t)=>(0,r.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:["user"===e.sender?(0,r.jsx)(i.m3W,{className:"text-blue-600 text-xl"}):(0,r.jsx)(c.zKx,{className:"text-gray-600 text-xl"}),(0,r.jsx)("div",{className:"p-3 rounded-lg max-w-lg bg-white shadow-sm ".concat("user"===e.sender?"text-blue-700 border border-blue-300":"text-gray-700 border border-gray-300"),children:s(e.text)})]})},t))}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center text-center m-20",children:[(0,r.jsx)(a(),{src:n.default,className:"rounded-full bg-white p-3",alt:"chat bot icon",height:100,width:100,priority:!0}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{className:"text-lg font-medium text-gray-500",children:"Next.js 14 using Web Socket and Google Gemini API"})]})})})}},6713:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),n=s(29),o=s.n(n),a=s(2265),i=s(4295),c=s(9089);let l=(0,s(8680).io)();function d(e){let{sendDataToParent:t}=e,[s,n]=(0,a.useState)(""),[d,f]=(0,a.useState)([]),[u,m]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=sessionStorage.getItem("messages");e&&f(JSON.parse(e))},[]),(0,a.useEffect)(()=>{function e(){m(!0)}function s(){m(!1)}return l.connected&&e(),l.on("connect",e),l.on("disconnect",s),l.on("response",e=>{x(!1),console.log("Received response:",e);let s={sender:"bot",text:e};f(e=>{let r=[...e,s];return sessionStorage.setItem("messages",JSON.stringify(r)),t(r),r})}),()=>{l.off("connect",e),l.off("disconnect",s),l.off("response")}},[t]);let p=()=>{if(!s)return;let e={sender:"user",text:s};f(s=>{x(!0);let r=[...s,e];return sessionStorage.setItem("messages",JSON.stringify(r)),t(r),r}),console.log("messages=",d),l&&u?(console.log("Socket is connected, sending message..."),l.emit("message",s)):console.error("Socket is not initialized or not connected"),n("")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"jsx-44c6c384c94b6b72 w-auto flex justify-stretch items-center p-2 bg-slate-200 m-2 rounded",children:[(0,r.jsx)("input",{type:"text",placeholder:"Ask the chatBot here..",value:s,onChange:e=>n(e.target.value),className:"jsx-44c6c384c94b6b72 flex-grow p-2 border border-transparent rounded focus:outline-none focus:ring-0 focus:border-gray-500"}),s&&u&&(0,r.jsx)(i.ghy,{className:"text-gray-600 size-8 mx-2 cursor-pointer",onClick:()=>p()}),g&&(0,r.jsx)(c.fCD,{className:"text-gray-600 size-8 mx-2",style:{animation:"spin 1s linear infinite"}})]}),(0,r.jsx)(o(),{id:"44c6c384c94b6b72",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"}),(0,r.jsx)("div",{className:"jsx-44c6c384c94b6b72"})]})}l.on("connect",()=>{console.log("Socket connected:",l.id)}),l.on("disconnect",()=>{console.log("Socket disconnected:",l.id)}),l.on("response",e=>{console.log("Received response:",e)})},7340:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var r=s(7437),n=s(2265),o=s(4167),a=s(6713);function i(){let[e,t]=(0,n.useState)([]);return(0,n.useEffect)(()=>{let e=sessionStorage.getItem("messages");e&&t(JSON.parse(e))},[]),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.default,{messages:e}),(0,r.jsx)(a.default,{sendDataToParent:function(e){t(e)}})]})}},8461:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return c},getImageProps:function(){return i}});let r=s(7043),n=s(5346),o=s(5878),a=r._(s(5084));function i(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=o.Image},9628:function(e,t,s){"use strict";s.r(t),t.default={src:"/_next/static/media/icon.9a7e9096.svg",height:119,width:123,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[699,522,452,878,96,971,117,744],function(){return e(e.s=3991)}),_N_E=e.O()}]);